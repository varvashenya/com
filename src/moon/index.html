<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Lunar Lander - Launch from Moon</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: #0f0;
        }

        #gameContainer {
            position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            max-width: 100vw;
        }

        canvas {
            display: block;
            border: 2px solid #0f0;
            background: #000;
            max-width: 100%;
            height: auto;
        }

        @media (max-width: 850px) {
            canvas {
                width: 100vw;
                height: auto;
            }
        }

        #touchControls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 15px;
            z-index: 100;
            flex-direction: row;
            align-items: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 0, 0.3);
        }

        @media (hover: none) and (pointer: coarse) {
            #touchControls {
                display: flex;
            }
        }

        @media (max-width: 600px) {
            #touchControls {
                bottom: 10px;
                gap: 10px;
            }
        }

        .touch-button {
            width: 70px;
            height: 70px;
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid #0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #0f0;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
            cursor: pointer;
            transition: all 0.1s;
            font-weight: bold;
        }

        .touch-button:active,
        .touch-button.active {
            background: rgba(0, 255, 0, 0.5);
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            transform: scale(0.95);
        }

        .touch-button-large {
            width: 90px;
            height: 90px;
            font-size: 32px;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .touch-button {
                width: 60px;
                height: 60px;
                font-size: 20px;
            }
            .touch-button-large {
                width: 75px;
                height: 75px;
                font-size: 28px;
            }
        }

        #toggleTouchControls {
            position: fixed;
            bottom: 120px;
            right: 20px;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid #0f0;
            color: #0f0;
            padding: 8px 12px;
            font-size: 11px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            border-radius: 4px;
            z-index: 101;
        }

        #toggleTouchControls:hover {
            background: rgba(0, 255, 0, 0.3);
        }

        @media (hover: none) and (pointer: coarse) {
            #toggleTouchControls {
                display: none;
            }
        }

        #instructions {
            margin-top: 20px;
            text-align: center;
            max-width: 600px;
            padding: 20px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #0f0;
        }

        #instructions h2 {
            margin-bottom: 10px;
        }

        #instructions p {
            margin: 5px 0;
            font-size: 14px;
        }

        .key {
            display: inline-block;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid #0f0;
            padding: 2px 8px;
            margin: 0 2px;
            border-radius: 3px;
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #0f0;
            padding: 30px;
            text-align: center;
            display: none;
        }

        #gameOver h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        #gameOver button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 10px 30px;
            font-size: 16px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            margin-top: 20px;
        }

        #gameOver button:hover {
            background: #0a0;
        }

        footer {
            margin-top: 20px;
            padding: 15px;
            text-align: center;
            font-size: 12px;
            color: #0a0;
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid rgba(0, 255, 0, 0.2);
            max-width: 600px;
        }

        footer a {
            color: #0f0;
            text-decoration: none;
            border-bottom: 1px dotted #0f0;
        }

        footer a:hover {
            color: #0ff;
            border-bottom-color: #0ff;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="gameOver">
            <h2 id="gameOverTitle">MISSION COMPLETE</h2>
            <p id="gameOverMessage"></p>
            <button onclick="location.reload()">RESTART</button>
        </div>
    </div>

    <!-- Touch Controls for Mobile -->
    <div id="touchControls">
        <div class="touch-button" id="touchLeft" data-key="left">‚Üê</div>
        <div class="touch-button touch-button-large" id="touchThrust" data-key="up">‚Üë</div>
        <div class="touch-button" id="touchRight" data-key="right">‚Üí</div>
    </div>

    <!-- Toggle button for desktop testing -->
    <button id="toggleTouchControls">SHOW TOUCH</button>

    <div id="instructions">
        <h2>üåô LUNAR LANDER - ESCAPE THE MOON</h2>
        <p><strong>CONTROLS:</strong></p>
        <p><strong>When Landed:</strong> Press <span class="key">‚Üë</span> to take off (thrusts straight up)</p>
        <p><strong>When Airborne:</strong> <span class="key">‚Üë</span> thrusts forward, <span class="key">‚Üê</span> <span class="key">‚Üí</span> rotate AND thrust (mobile-friendly!)</p>
        <p><strong>Touch:</strong> Use on-screen buttons - left/right buttons activate thrust while rotating</p>
        <p>üí° <strong>Tip:</strong> On mobile, use left/right buttons to thrust and rotate simultaneously!</p>

        <p style="margin-top: 15px;"><strong>COCKPIT INSTRUMENTS:</strong></p>
        <p>üìä <strong>Top Left - Resource Bars</strong>: FUEL (green/yellow/red), ALT (altitude 0-500m), O2 (oxygen, cyan/yellow/red)</p>
        <p>üìà <strong>Bottom Left - Digital Displays</strong>: VEL (velocity in m/s), ANG (angle in degrees)</p>
        <p>üö¶ <strong>Bottom Center - Warning Lights</strong>: [V] Vertical speed, [H] Horizontal speed, [A] Angle, [OK] Overall status</p>
        <p>üí° <strong>Bottom Right - Status Indicators</strong>: LAND (landed), FUEL! (low fuel alert), O2! (low oxygen alert), THR (thrusting)</p>
        <p>üí° <strong>Colors:</strong> Green = safe, Yellow = warning, Red = danger. Dimmed indicators show inactive systems.</p>

        <p style="margin-top: 15px;"><strong>MISSION OBJECTIVES:</strong></p>
        <p>üéØ <strong>Primary Goal:</strong> Fly into the cyan ESCAPE portal at the top! It moves slowly side-to-side.</p>
        <p>‚ö° <strong>Energy Station:</strong> Land at the holographic charging pad (left side) to refuel!</p>
        <p>‚è±Ô∏è <strong>SURVIVAL:</strong> You have ~5 minutes of oxygen! Complete mission before O2 runs out!</p>
        <p>‚ö†Ô∏è <strong>Safe Landing Requirements:</strong> Vertical speed < 1.5 m/s, Horizontal < 2.0 m/s, Angle < 30¬∞</p>
        <p>üí° <strong>Tip:</strong> Track the portal's movement and time your ascent carefully!</p>
    </div>

    <footer>
        <p>Made with ‚ù§Ô∏è by <a href="/">Dmitrii Varvashenia</a> and GitHub Copilot</p>
    </footer>

    <script src="moon.js"></script>
</body>
</html>